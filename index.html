<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Haze</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: #000; color: white; font-family: "Georgia", serif; overflow: hidden; }
        
        .slide {
            height: 100vh; width: 100vw;
            display: none; /* Everything hidden by default */
            flex-direction: column; align-items: center; justify-content: flex-start;
            background-size: cover; background-position: center; padding: 20px;
            position: relative;
        }

        /* ONLY the active slide shows up */
        .active { display: flex !important; }

        .slide-text {
            font-weight: bold; font-style: italic; color: black;
            text-shadow: -1.5px -1.5px 0 #ff0000, 1.5px -1.5px 0 #ff0000, 1.5px 1.5px 0 #ff0000, 1.5px 1.5px 0 #ff0000;
            line-height: 1.4; text-align: center; z-index: 10;
        }

        #s1 .slide-text { font-size: 2.5rem; margin-top: 15vh; }
        #s2 .slide-text { font-size: 1.5rem; margin-top: 10vh; }
        #s4 .slide-text { font-size: 1.4rem; margin-top: 5vh; }

        .fancy-btn {
            margin-top: 40px; padding: 20px 40px; font-size: 1.2rem;
            background: linear-gradient(to bottom, #ff0000, #8b0000);
            color: white; border: 3px solid #ffd700; border-radius: 50px;
            cursor: pointer; z-index: 100; font-weight: bold;
        }

        /* LARGE CARD */
        .card-container { width: 330px; height: 480px; perspective: 1000px; margin-top: 20px; }
        .card-inner { width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; position: relative; }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border: 5px solid #ffd700; border-radius: 15px; background-size: cover; display: flex; align-items: center; justify-content: center; background-color: white; }
        .card-front { background-image: url('card_front.png'); }
        .card-inside { background-image: url('card_inside.png'); transform: rotateY(180deg); padding: 20px; }
        .card-back { background-image: url('card_back.png'); transform: rotateY(360deg); }
        .flipped-1 { transform: rotateY(-180deg); }
        .flipped-2 { transform: rotateY(-360deg); }

        .corner-tree { position: absolute; bottom: -20px; right: -40px; width: 400px; z-index: 5; pointer-events: none; }
        .santa-img { width: 200px; margin-top: 20px; }

        /* Snow/Hearts */
        .fx { position: fixed; top: -20px; z-index: 1000; pointer-events: none; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh); } }
    </style>
</head>
<body>

    <audio id="mySong" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div class="slide active" id="s1" style="background-image: url('bg1.jpg');">
        <h1 class="slide-text">hi haze ‚ù§<br>this is for you üíï</h1>
        <button class="fancy-btn" onclick="startApp()">Open Your Gift üéÅ</button>
        <img src="tree.png" class="corner-tree">
    </div>

    <div class="slide" id="s2" style="background-image: url('bg2.jpg');">
        <p class="slide-text">Merry Christmas, babe. I wish I was there with you right now, but even from far away, I‚Äôm thinking about you and missing you like crazy...</p>
        <button class="fancy-btn" onclick="goToSlide(3)">For your family ‚ú®</button>
    </div>

    <div class="slide" id="s3" style="background-image: url('bg3.jpg');">
        <div class="card-container" onclick="flipCard()">
            <div class="card-inner" id="inner">
                <div class="card-face card-front"></div>
                <div class="card-face card-inside">
                    <p style="color:#8b0000; font-weight:bold; background:rgba(255,255,255,0.8); padding:10px; border-radius:10px;">Merry Christmas to you both. I know this is your first Christmas without her... wishing your family strength and peace.</p>
                </div>
                <div class="card-face card-back"></div>
            </div>
        </div>
        <button class="fancy-btn" onclick="goToSlide(4)">One last thing... üíñ</button>
    </div>

    <div class="slide" id="s4" style="background-image: url('bg4.jpeg');">
        <img src="santa.png" class="santa-img">
        <p class="slide-text">This Christmas, I just want you to know you‚Äôre in my prayers... I love you.</p>
    </div>

    <script>
        let step = 0;
        function startApp() {
            document.getElementById('mySong').play();
            goToSlide(2);
        }
        function goToSlide(n) {
            document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
            document.getElementById('s'+n).classList.add('active');
            if(n >= 2) setInterval(addSnow, 200);
        }
        function flipCard() {
            step++;
            const el = document.getElementById('inner');
            if(step==1) el.className = 'card-inner flipped-1';
            else if(step==2) el.className = 'card-inner flipped-2';
            else { el.className = 'card-inner'; step=0; }
        }
        function addSnow() {
            const s = document.createElement('div');
            s.className = 'fx';
            s.innerHTML = Math.random() > 0.5 ? '‚ùÑ' : '‚ù§';
            s.style.left = Math.random() * 100 + 'vw';
            s.style.fontSize = Math.random() * 20 + 10 + 'px';
            s.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 4000);
        }
    </script>
</body>
</html>
